{% extends "template.html" %}
{% block content %}
<div onload="reset()">
    <div class="wrapper">
        <div id="cd" class="circle gray">
            <span id="pic" class="album-cover"></span>
            <div class="circle-inner">
            </div>
        </div>
        <div class="record black">
        </div>
        <div id="tray" class="text-box">
            <div class="Name">
                Song
            </div>
            <div class="song_deets">
                <span id="Artist">Artist</span> <br><span id="album">Heckin Frick</span>
            </div>
    </div>
</div>

</div>
<script>
    getCurSong()
    function getSpotifyId(){
        var url = window.location
        return [window.location.hostname, url.search.split("=")[1]]
    }

    function getCurSong(){
        var spotify_id = new Promise((res,rej) => {
            res(getSpotifyId())
        }).then(res => {
            console.log("http://"+res[0]+"/current_song/"+res[1])
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                // Typical action to be performed when the document is ready:
                res(xhttp.responseText);
                }
            };
            xhttp.open("GET", "http://"+res[0]+"/current_song/"+res[1], true);
            xhttp.send();
        })
    }
   var spin= anime({
        targets: '#pic',
        rotate: 360,
        loop: true,
        easing: 'linear'
    });
    function newSong(){
        anime ({
            targets: "#cd",
            translateY: [
                {value:-40, duration:1500, easing: 'linear'},
                {value:0, duration:1500, delay: 5000, easing: 'linear'},
            ]
        }); 
    }
//     (function(){
//         setTimeout(
//         var promise = new Promise((resolve, reject) => {
//             if (document.getElementsByClassName("Name").value==getCurSong()) {
                
//             } else {
//                 reject(error);
//             }
//         }), 
//         promise.then(res => {
            
//         }), 60000);
// });

</script>
{% endblock %}
